<div class="mx-auto max-w-screen-xl px-4 py-8 2xl:px-0">
  <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Lista de Deseados</h2>

  @if (wishlistState.products().length > 0) {
    <div class="flex flex-col gap-4">
      @for (product of wishlistState.products(); track product.id; let i = $index) {
        
        <div class="flex flex-col md:flex-row items-start md:items-center bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 dark:bg-gray-800 p-4 relative overflow-hidden gap-4">
          
          <div class="absolute top-0 left-0 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 px-3 py-1 rounded-br-lg font-bold text-sm z-10">
            #{{ i + 1 }}
          </div>
          
          <div class="flex gap-2">
             <button (click)="move(i, 'up')" [disabled]="i === 0" class="flex-1 flex items-center justify-center p-2 text-gray-500 bg-white border border-gray-200 hover:bg-gray-100 rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors shadow-sm" title="Subir prioridad">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5l0 14" /><path d="M18 11l-6 -6" /><path d="M6 11l6 -6" /></svg>
            </button>
            
            <button (click)="move(i, 'down')" [disabled]="i === wishlistState.products().length - 1" class="flex-1 flex items-center justify-center p-2 text-gray-500 bg-white border border-gray-200 hover:bg-gray-100 rounded-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors shadow-sm" title="Bajar prioridad">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5l0 14" /><path d="M18 13l-6 6" /><path d="M6 13l6 6" /></svg>
            </button>
          </div>

          <div class="w-full md:w-32 h-32 flex-shrink-0 bg-white rounded-md p-2 flex items-center justify-center border dark:border-gray-600">
            <img [src]="product.image" [alt]="product.title" class="h-full w-full object-contain">
          </div>

          <div class="flex-grow w-full min-w-0">
            <h3 class="text-lg font-bold text-gray-900 dark:text-white truncate">{{ product.title }}</h3>
            
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
              <span class="font-medium text-gray-900 dark:text-white">Categoría:</span> 
              {{ product.category | titlecase }}
            </p>

            <p class="mt-2 text-sm text-gray-600 dark:text-gray-300 line-clamp-2 leading-relaxed">
              {{ product.description }}
            </p>

            <p class="text-xl font-bold text-gray-900 dark:text-white mt-3">{{ product.price | currency }}</p>
          </div>

          <div class="flex flex-col w-full md:w-auto gap-3 flex-shrink-0">
            
            <button (click)="addToCart(product)" class="flex items-center justify-center gap-2 w-full md:w-48 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M17 17h-11v-14h-2"/><path d="M6 5l14 1l-1 7h-13"/></svg>
              Agregar al Carrito
            </button>

            <div class="flex gap-2 justify-center">
               
              <button (click)="remove(product.id)" class=" md:flex-none flex items-center  gap-2 p-2.5 text-red-600 bg-red-100 hover:bg-red-200 rounded-lg dark:bg-red-900/30 dark:text-red-500 dark:hover:bg-red-900/50 transition-colors" title="Eliminar">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>
                Borrar
                </button>
            </div>

          </div>
        </div>
      }
    </div>
  } @else {
    <div class="flex flex-col items-center justify-center py-24 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700">
      <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-full mb-4">
          <svg class="h-12 w-12 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
          </svg>
      </div>
      <h3 class="text-xl font-bold text-gray-900 dark:text-white">Tu lista de deseados está vacía</h3>
      <p class="mt-2 text-gray-500 dark:text-gray-400 text-center max-w-sm">Explora nuestros productos y guarda los que más te gusten para no perderlos de vista.</p>
    </div>
  }
</div>